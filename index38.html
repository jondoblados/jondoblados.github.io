<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
        <title>Jon Doblados</title>
        <link rel="shortcut icon" href="http://jon.doblados.net/favicon.ico" />

        <link rel="stylesheet" href="http://jon.doblados.net/theme/css/screen.css" type="text/css" />
        <link rel="stylesheet" href="http://jon.doblados.net/theme/css/pygments.css" type="text/css" />
    </head>
    <body>
<div id="header">
            <ul id="nav">
                <li><a href="http://jon.doblados.net">Home</a></li>
<li><a href="http://jon.doblados.net/pages/about.html">About</a></li>
<li><a href="http://jon.doblados.net/pages/contact.html">Contact</a></li>
<li><a href="http://jon.doblados.net/archives.html">Archives</a></li>
            </ul>
            <div class="header_box">
                <h1><a href="http://jon.doblados.net">Jon Doblados</a></h1>
            </div>
        </div>
        <div id="wrapper">
            <div id="content">
                <h4 class="date">Aug %e,  %G</h4>
                <div class="post">
<h2 class="title">
                        <a href="http://jon.doblados.net/plesk-wont-start-after-tweaking-mysql.html" rel="bookmark" title="Permanent Link to &quot;plesk won't start after tweaking mysql&quot;">plesk won't start after tweaking mysql</a>
                    </h2>

                    <p>i've had this happen to me again the other week and as always, felt like
kicking myself for not remembering.</p>
<p>we do a lot of performance tuning on mysql, and as a result, we almost
always manage to get plesk mangled. not its fault, it just can't run
without mysql, doh.</p>
<p>not of preference, but plesk happens to be there to make handling
domains easier, as a single editing point when you want to change
something and not worry about missing something out.</p>
<p>so there's a custom /etc/my.cnf that we use, and with changes to limits
done (both on mysql and via ulimit), you'd think that a reload of mysqld
would do. (we use InnoDB btw)</p>
<p>normally, that's all you need to have mysqld read off the new settings.
if you've grown so dependent on plesk (like i have), you would not
notice that mysqld didn't actually start, and you will get an error when
you load plesk, thinking that it's a plesk error:</p>
<p><code>ERROR: PleskMainDBExceptionMySQL query failed: Incorrect information in file: './psa/misc.frm'</code></p>
<p>0: /usr/local/psa/admin/plib/common_func.php3:218<br />
db_query(string 'select param, val from misc')<br />
1: /usr/local/psa/admin/plib/common_func.php3:497<br />
get_param(string 'mysql41_compatible')<br />
2: /usr/local/psa/admin/plib/common_func.php3:394<br />
db_set_names()<br />
3: /usr/local/psa/admin/plib/common_func.php3:373<br />
db_connect_real(string 'localhost', string 'admin', string
'********', string 'psa')<br />
4: /usr/local/psa/admin/plib/common_func.php3:353<br />
db_connect()<br />
5: /usr/local/psa/admin/auto_prepend/auth.php3:82<br />
</code></p>
<p>even a restart of the plesk service will not work:</p>
<p><code>[root@jedi]# /etc/init.d/psa restartUnable to query parameter by query select val from misc where param='mysql41_compatible': Incorrect information in file: './psa/misc.frm'Unable to query parameter by query select val from misc where param='mysql41_compatible': Incorrect information in file: './psa/misc.frm'Mysql error: Incorrect information in file: './psa/key_history.frm'Processing config directory: /usr/local/psa/admin/conf/httpsd.*.includeSyntax OK/usr/local/psa/admin/bin/httpsdctl restart: httpd restartedERROR 1033 (HY000) at line 1: Incorrect information in file: './psa/sessions.frm'</code></p>
<p>so this is a mysqld failing to start properly problem. to fix this, go
to your mysql datadir and see if the sizes of your innodb log files
match those in your .cnf. we usually set innodb_log_file_size = 256M
and innodb_log_buffer_size = 256M in /etc/my.cnf.</p>
<p>if they don't match, stop mysqld, remove the ib_logfile0 and
ib_logfile1 files, and start mysqld. be careful not to delete the
ibdata1 or ibdata2 files or you lose your data. avoid using rm -r ib*
(yea, wildcards and fast fingers give sysads their most stupefying
moments)</p>
<p>innodb will recreate the log files to match your .cnf and mysqld now
becomes available for plesk.</p>
</p>

                    <div class="clear"></div>
                    <div class="info">
<a href="http://jon.doblados.net/plesk-wont-start-after-tweaking-mysql.html">posted at %l:09 %P</a>&nbsp;&middot;&nbsp;<a href="http://jon.doblados.net/category/misc.html" rel="tag">misc</a>
                        <div class="tags">
                            <a href="http://jon.doblados.net/tag/hosting.html">Hosting</a>
                            <a href="http://jon.doblados.net/tag/mysql.html">MySQL</a>
                        </div>
                    </div>
                    <div class="clear"></div>
                </div>

                <div class="post">
<h2 class="title">
                        <a href="http://jon.doblados.net/apt-get-install-kicker-kblogger.html" rel="bookmark" title="Permanent Link to &quot;apt-get install kicker-kblogger&quot;">apt-get install kicker-kblogger</a>
                    </h2>

                    <p>i don't know with you, but i sometimes get the big push to update, if
and when there's something new (relatively, for me) to try.</p>
<p>up for this week is my dabbling with stuff around kicker, and using
kblogger to do some much needed updates.</p>

                    <div class="clear"></div>
                    <div class="info">
<a href="http://jon.doblados.net/apt-get-install-kicker-kblogger.html">posted at %l:26 %P</a>&nbsp;&middot;&nbsp;<a href="http://jon.doblados.net/category/tech.html" rel="tag">Tech</a>
                        <div class="tags">
                            <a href="http://jon.doblados.net/tag/gnulinux.html">GNU/Linux</a>
                            <a href="http://jon.doblados.net/tag/technology.html">Technology</a>
                            <a href="http://jon.doblados.net/tag/ubuntu.html">Ubuntu</a>
                            <a href="http://jon.doblados.net/tag/nix.html">*nix</a>
                        </div>
                    </div>
                    <div class="clear"></div>
                </div>

                <h4 class="date">May %e,  %G</h4>
                <div class="post">
<h2 class="title">
                        <a href="http://jon.doblados.net/pushing-on.html" rel="bookmark" title="Permanent Link to &quot;Pushing on&quot;">Pushing on</a>
                    </h2>

                    <p>I recently got Ubuntu Feisty Fawn Beta running on my HP Pavilion
dv2001tu notebook, and I'm very happy with the way it's running. Here's
what I've done and have been doing the past month. Nothing out of the
ordinary for me, but some of the activities mentioned here could have
been keeping you up late at nights, coveting much of the understated
successes of<br />
running Ubuntu on HP laptops. If this is indeed so, do let me know your
woes and I'll see what I can do to help.</p>
<p>​1. Started a clan network. Okay, so most of them are really old and
have no appreciation whatsoever for the internet, much less understand
what emails are, and personalized email addresses at that. So I'll leave
this up to the younger ones, who will help me teach the older ones the
basics. They are yet to be informed of this new responsibility. LOL.</p>
<p>​2. Upgraded desktop computer to Feisty Fawn Beta, and dual-booted
Feisty and XP on my Pavilion dv2001tu lappy. So far, I have not had any
hair-tearing frustrations with Feisty. Devices seem to work off-the-box,
and the quick keys also seem to work fine (except of course for HP
QuickPlay, which doesn't do anything). Touchpad, wireless, pcm+pcm2 with
muting, and built-in mic all work. I've managed to get the built-in
webcam to run with Ekiga (more details in a future post).</p>
<p>​3. Started on my own list of what works and what doesn't for the HP
Pavilion dv2001tu. Will try to make this as authoritative and as
non-biased as possible. I love them Acer, Lenovo, and of course, Compaq
notebooks too, but since I exclusively use my dv2000, I won't be able to
vouch that the hacks I apply are going to work with the others.</p>
<p>​4. Worked on more and more domains and hostings. I eat hostings for
affiliate sites and stuff, day in and day out. I've optimized apache and
mysql for several half-a-million traffic/day sites. Log analyzers are
your best friends. I recommend Splunk for those who want to dig through
files like search engines. But there's always the basic awk, grep, and
myriad of other commands you can script together for the job.</p>
<p>​5. Promised myself I'd start updating more often. 'Nuff said. =)</p>

                    <div class="clear"></div>
                    <div class="info">
<a href="http://jon.doblados.net/pushing-on.html">posted at %l:49 %P</a>&nbsp;&middot;&nbsp;<a href="http://jon.doblados.net/category/misc.html" rel="tag">misc</a>
                        <div class="tags">
                            <a href="http://jon.doblados.net/tag/gnulinux.html">GNU/Linux</a>
                            <a href="http://jon.doblados.net/tag/systems-administration.html">Systems Administration</a>
                            <a href="http://jon.doblados.net/tag/technology.html">Technology</a>
                            <a href="http://jon.doblados.net/tag/ubuntu.html">Ubuntu</a>
                        </div>
                    </div>
                    <div class="clear"></div>
                </div>

                <h4 class="date">Apr %e,  %G</h4>
                <div class="post">
<h2 class="title">
                        <a href="http://jon.doblados.net/lj-rocks-more-than-ever.html" rel="bookmark" title="Permanent Link to &quot;LJ rocks more than ever&quot;">LJ rocks more than ever</a>
                    </h2>

                    <p>Thanks to eclair for the links. :) And I thought scribfire rawked
totally. Whee!</p>

                    <div class="clear"></div>
                    <div class="info">
<a href="http://jon.doblados.net/lj-rocks-more-than-ever.html">posted at %l:59 %P</a>&nbsp;&middot;&nbsp;<a href="http://jon.doblados.net/category/misc.html" rel="tag">misc</a>
                        <div class="tags">
                            <a href="http://jon.doblados.net/tag/personal.html">Personal</a>
                        </div>
                    </div>
                    <div class="clear"></div>
                </div>

                <div class="clear"></div>
                <div class="pages">
                    <a href="http://jon.doblados.net/index37.html" class="prev_page">&larr;&nbsp;Previous</a>
                    <a href="http://jon.doblados.net/index39.html" class="next_page">Next&nbsp;&rarr;</a>
                    <span>Page 38 of 57</span>
                </div>

                <div class="clear"></div>
                <div id="footer">
                    <p>
                    Mockingbird theme by <a href="http://nevanscott.com/">Nevan Scott</a>
                    &middot;
                    <a class="atom" href="http://jon.doblados.net/None">Feed</a>
                </div>
            </div>
            <div class="clear"></div>
        </div>
    </body>
</html>