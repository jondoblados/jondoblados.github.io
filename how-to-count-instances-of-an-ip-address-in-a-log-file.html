<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>How to count instances of an IP address in a log file</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Jon">

    <!-- Le styles -->
    <link rel="stylesheet" href="http://jon.doblados.net/theme/css/bootstrap.min.css" type="text/css" />
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      .tag-1 {
        font-size: 13pt;
      }
      .tag-2 {
        font-size: 10pt;
      }
      .tag-2 {
        font-size: 8pt;
      }
      .tag-4 {
        font-size: 6pt;
     }
    </style>
    <link href="http://jon.doblados.net/theme/css/bootstrap-responsive.min.css" rel="stylesheet">
        <link href="http://jon.doblados.net/theme/css/font-awesome.css" rel="stylesheet">

    <link href="http://jon.doblados.net/theme/css/pygments.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="http://jon.doblados.net/theme/images/favicon.ico">
    <link rel="apple-touch-icon" href="http://jon.doblados.net/theme/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="http://jon.doblados.net/theme/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="http://jon.doblados.net/theme/images/apple-touch-icon-114x114.png">

    <link href="http://jon.doblados.net/" type="application/atom+xml" rel="alternate" title="Jon Doblados ATOM Feed" />

  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="http://jon.doblados.net/index.html">Jon Doblados </a>
          <div class="nav-collapse">
            <ul class="nav">
                <li><a href="http://jon.doblados.net/pages/about.html">About</a></li>
                <li><a href="http://jon.doblados.net/pages/contact.html">Contact</a></li>
                          <li class="divider-vertical"></li>
                  <li >
                    <a href="http://jon.doblados.net/category/aside.html">
						<i class="icon-folder-open icon-large"></i>Aside
					</a>
                  </li>
                  <li >
                    <a href="http://jon.doblados.net/category/gbg.html">
						<i class="icon-folder-open icon-large"></i>GBG
					</a>
                  </li>
                  <li class="active">
                    <a href="http://jon.doblados.net/category/misc.html">
						<i class="icon-folder-open icon-large"></i>Misc
					</a>
                  </li>
                  <li >
                    <a href="http://jon.doblados.net/category/python.html">
						<i class="icon-folder-open icon-large"></i>Python
					</a>
                  </li>
                  <li >
                    <a href="http://jon.doblados.net/category/tech.html">
						<i class="icon-folder-open icon-large"></i>Tech
					</a>
                  </li>

                          <ul class="nav pull-right">
                                <li><a href="http://jon.doblados.net/archives.html"><i class="icon-th-list"></i>Archives</a></li>
                          </ul>

            </ul>
            <!--<p class="navbar-text pull-right">Logged in as <a href="#">username</a></p>-->
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row">
        <div class="span9" id="content">
<section id="content">
        <article>
                <header>
                        <h1>
                                <a href=""
                                        rel="bookmark"
                                        title="Permalink to How to count instances of an IP address in a log file">
                                        How to count instances of an IP address in a log file
                                </a>
                        </h1>
                </header>
                <div class="entry-content">
                <div class="well">
<footer class="post-info">
<span class="label">Date</span>
<abbr class="published" title="2010-07-24T12:00:00+08:00">
        <i class="icon-calendar"></i>Sat 24 July 2010
</abbr>
<span class="label">By</span>
<a href="http://jon.doblados.net/author/jon.html"><i class="icon-user"></i>jon</a>
<span class="label">Category</span>
<a href="http://jon.doblados.net/category/misc.html"><i class="icon-folder-open"></i>misc</a>.


<span class="label">Tags</span>
	<a href="http://jon.doblados.net/tag/gnulinux.html"><i class="icon-tag"></i>GNU/Linux</a>
	<a href="http://jon.doblados.net/tag/hosting.html"><i class="icon-tag"></i>Hosting</a>
	<a href="http://jon.doblados.net/tag/systems-administration.html"><i class="icon-tag"></i>Systems Administration</a>
</footer><!-- /.post-info -->                </div>
                <p>I was looking for a quick and painless way to determine what IP
addresses used our web app the most and stumbled across this excellent
<a href="http://encodable.com/tech/blog/2008/12/17/Count_IP_Addresses_in_Access_Log_File_BASH_OneLiner">post</a>.Â I
got reminded of the power of the command-line interface and that often,
I underestimate the way these commands are supposed to make a sysad's
life easier.</p>
<p>So here's a quick tip for counting unique visitors to your web app.
Locate your web app's log file and do a quick scan of the last few
lines. In my case, this is what I saw:</p>
<p><code>112.198.79.223 - - [10/Jul/2010:00:57:29 -0400] "POST /v2/api/execute.php?method=upload_time&amp;ver=win1.1.15 HTTP/1.1" 200 116 "-" "Mozilla/5.0"117.241.112.254 - - [10/Jul/2010:00:57:30 -0400] "POST /v2/api/execute.php?method=timestat&amp;ver=win1.1.15 HTTP/1.1" 200 288 "-" "Mozilla/5.0"80.249.84.105 - - [10/Jul/2010:00:57:29 -0400] "POST /v2/api/execute.php?method=offtime&amp;ver=win1.1.15 HTTP/1.1" 200 19 "-" "Mozilla/5.0"117.241.112.254 - - [10/Jul/2010:00:57:32 -0400] "POST /v2/api/execute.php?method=get_defaults&amp;ver=win1.1.15 HTTP/1.1" 200 77 "-" "Mozilla/5.0"</code></p>
<p>In this log format, the IP address appears first, so we will only need
to get the first set of characters, separated by a space. In order to
count instances of an IP address, we sort the IP addresses so similar IP
addresses are grouped together, then count them. Then we sort them again
so that the sums are arranged. The number of unique IPs may give you
pages of standard output, so optionally, if you only want to see which
IP addresses accessed the web app the most, we look at the top results
only.</p>
<p>So these are the commands used, piped one after the other, with the
output:</p>
<p><code>[root@server2 ~]# cat /var/log/httpd/access_ssl.log | awk '{print $1}' | sort | uniq -c | sort -nr | head&gt;</code></p>
<p><code>71612 216.157.78.237 34094 120.28.205.244 30091 119.93.97.54 25078 120.28.214.104 18949 120.28.195.151 17929 58.107.64.40 14877 212.98.174.235 14752 117.241.112.143 14429 120.28.247.74 12864 117.241.113.183 [root@server2 ~]#</code></p>
<p>Happy counting, err reporting!</p>
                </div><!-- /.entry-content -->
                <div class="comments">
                <h2>Comments !</h2>
                        <div id="disqus_thread"></div>
                        <script type="text/javascript">
                           var disqus_identifier = "how-to-count-instances-of-an-ip-address-in-a-log-file.html";
                           (function() {
                                var dsq = document.createElement('script');
                                dsq.type = 'text/javascript'; dsq.async = true;
                                dsq.src = 'http://jondoblados.disqus.com/embed.js';
                                (document.getElementsByTagName('head')[0] ||
                                 document.getElementsByTagName('body')[0]).appendChild(dsq);
                          })();
                        </script>
                </div>
        </article>
</section>
        </div><!--/span-->

                <div class="span3 well sidebar-nav" id="sidebar">
<ul class="nav nav-list">
<li class="nav-header"><h4><i class="icon-external-link"></i>blogroll</h4></li>
    <li><a href="http://getpelican.com/"><i class="icon-external-link"></i>Pelican</a></li>
    <li><a href="http://python.org/"><i class="icon-external-link"></i>Python.org</a></li>
    <li><a href="http://jinja.pocoo.org/"><i class="icon-external-link"></i>Jinja2</a></li>
<li class="nav-header"><h4><i class="icon-home icon-large"></i> social</h4></li>
<li><a href="http://jon.doblados.net/" rel="alternate"><i class="icon-bookmark icon-large"></i>atom feed</a></li>
    <li><a href="http://twitter.com/JonDoblados"><i class="icon-Twitter-sign icon-large"></i>Twitter</a></li>
    <li><a href="http://plus.google.com/+JonDoblados"><i class="icon-Google+-sign icon-large"></i>Google+</a></li>

<li class="nav-header"><h4><i class="icon-folder-close icon-large"></i>Categories</h4></li>
<li>
<a href="http://jon.doblados.net/category/aside.html">
    <i class="icon-folder-open icon-large"></i>Aside
</a>
</li>
<li>
<a href="http://jon.doblados.net/category/gbg.html">
    <i class="icon-folder-open icon-large"></i>GBG
</a>
</li>
<li>
<a href="http://jon.doblados.net/category/misc.html">
    <i class="icon-folder-open icon-large"></i>Misc
</a>
</li>
<li>
<a href="http://jon.doblados.net/category/python.html">
    <i class="icon-folder-open icon-large"></i>Python
</a>
</li>
<li>
<a href="http://jon.doblados.net/category/tech.html">
    <i class="icon-folder-open icon-large"></i>Tech
</a>
</li>

<li class="nav-header"><h4><i class="icon-tags icon-large"></i>Tags</h4></li>
<li class="tag-3">
    <a href="http://jon.doblados.net/tag/nix.html">
        <i class="icon-tag icon-large"></i>*nix
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/katrina.html">
        <i class="icon-tag icon-large"></i>Katrina
    </a>
</li>
<li class="tag-3">
    <a href="http://jon.doblados.net/tag/data-center.html">
        <i class="icon-tag icon-large"></i>Data Center
    </a>
</li>
<li class="tag-2">
    <a href="http://jon.doblados.net/tag/galleries.html">
        <i class="icon-tag icon-large"></i>Galleries
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/victory.html">
        <i class="icon-tag icon-large"></i>Victory
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/isabel.html">
        <i class="icon-tag icon-large"></i>Isabel
    </a>
</li>
<li class="tag-2">
    <a href="http://jon.doblados.net/tag/gnulinux.html">
        <i class="icon-tag icon-large"></i>GNU/Linux
    </a>
</li>
<li class="tag-2">
    <a href="http://jon.doblados.net/tag/google.html">
        <i class="icon-tag icon-large"></i>Google
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/xavier-u.html">
        <i class="icon-tag icon-large"></i>Xavier U
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/writing.html">
        <i class="icon-tag icon-large"></i>Writing
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/jesus-christ.html">
        <i class="icon-tag icon-large"></i>Jesus Christ
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/parenting.html">
        <i class="icon-tag icon-large"></i>Parenting
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/office.html">
        <i class="icon-tag icon-large"></i>Office
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/parenthood.html">
        <i class="icon-tag icon-large"></i>Parenthood
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/gwf.html">
        <i class="icon-tag icon-large"></i>GWF
    </a>
</li>
<li class="tag-3">
    <a href="http://jon.doblados.net/tag/aside.html">
        <i class="icon-tag icon-large"></i>Aside
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/bug-tracking.html">
        <i class="icon-tag icon-large"></i>Bug Tracking
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/virtualization.html">
        <i class="icon-tag icon-large"></i>Virtualization
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/tech.html">
        <i class="icon-tag icon-large"></i>Tech
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/sysads.html">
        <i class="icon-tag icon-large"></i>Sysads
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/ec2.html">
        <i class="icon-tag icon-large"></i>EC2
    </a>
</li>
<li class="tag-2">
    <a href="http://jon.doblados.net/tag/vacation.html">
        <i class="icon-tag icon-large"></i>Vacation
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/pelican.html">
        <i class="icon-tag icon-large"></i>Pelican
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/christmas.html">
        <i class="icon-tag icon-large"></i>Christmas
    </a>
</li>
<li class="tag-3">
    <a href="http://jon.doblados.net/tag/image.html">
        <i class="icon-tag icon-large"></i>Image
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/oracle-bi.html">
        <i class="icon-tag icon-large"></i>Oracle BI
    </a>
</li>
<li class="tag-2">
    <a href="http://jon.doblados.net/tag/gbg-cagayan-de-oro.html">
        <i class="icon-tag icon-large"></i>GBG Cagayan de Oro
    </a>
</li>
<li class="tag-1">
    <a href="http://jon.doblados.net/tag/miguel.html">
        <i class="icon-tag icon-large"></i>Miguel
    </a>
</li>
<li class="tag-1">
    <a href="http://jon.doblados.net/tag/personal.html">
        <i class="icon-tag icon-large"></i>Personal
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/revision-control.html">
        <i class="icon-tag icon-large"></i>Revision Control
    </a>
</li>
<li class="tag-3">
    <a href="http://jon.doblados.net/tag/cloud-computing.html">
        <i class="icon-tag icon-large"></i>Cloud Computing
    </a>
</li>
<li class="tag-3">
    <a href="http://jon.doblados.net/tag/preschool.html">
        <i class="icon-tag icon-large"></i>Preschool
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/valentines-day.html">
        <i class="icon-tag icon-large"></i>Valentines Day
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/crystal-reports.html">
        <i class="icon-tag icon-large"></i>Crystal Reports
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/rds.html">
        <i class="icon-tag icon-large"></i>RDS
    </a>
</li>
<li class="tag-3">
    <a href="http://jon.doblados.net/tag/god.html">
        <i class="icon-tag icon-large"></i>God
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/openstack.html">
        <i class="icon-tag icon-large"></i>OpenStack
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/rs6000-b50.html">
        <i class="icon-tag icon-large"></i>RS6000 B50
    </a>
</li>
<li class="tag-2">
    <a href="http://jon.doblados.net/tag/christianity-amp-parenthood.html">
        <i class="icon-tag icon-large"></i>Christianity amp; Parenthood
    </a>
</li>
<li class="tag-3">
    <a href="http://jon.doblados.net/tag/blogging.html">
        <i class="icon-tag icon-large"></i>Blogging
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/civic.html">
        <i class="icon-tag icon-large"></i>Civic
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/python.html">
        <i class="icon-tag icon-large"></i>Python
    </a>
</li>
<li class="tag-1">
    <a href="http://jon.doblados.net/tag/technology.html">
        <i class="icon-tag icon-large"></i>Technology
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/victorycdo.html">
        <i class="icon-tag icon-large"></i>VictoryCDO
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/honda.html">
        <i class="icon-tag icon-large"></i>Honda
    </a>
</li>
<li class="tag-3">
    <a href="http://jon.doblados.net/tag/hong-kong.html">
        <i class="icon-tag icon-large"></i>Hong Kong
    </a>
</li>
<li class="tag-2">
    <a href="http://jon.doblados.net/tag/photos.html">
        <i class="icon-tag icon-large"></i>Photos
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/map-maker.html">
        <i class="icon-tag icon-large"></i>Map Maker
    </a>
</li>
<li class="tag-1">
    <a href="http://jon.doblados.net/tag/family.html">
        <i class="icon-tag icon-large"></i>Family
    </a>
</li>
<li class="tag-3">
    <a href="http://jon.doblados.net/tag/christianity.html">
        <i class="icon-tag icon-large"></i>Christianity
    </a>
</li>
<li class="tag-3">
    <a href="http://jon.doblados.net/tag/hci.html">
        <i class="icon-tag icon-large"></i>HCI
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/cloud.html">
        <i class="icon-tag icon-large"></i>Cloud
    </a>
</li>
<li class="tag-1">
    <a href="http://jon.doblados.net/tag/systems-administration.html">
        <i class="icon-tag icon-large"></i>Systems Administration
    </a>
</li>
<li class="tag-2">
    <a href="http://jon.doblados.net/tag/kysa.html">
        <i class="icon-tag icon-large"></i>Kysa
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/community.html">
        <i class="icon-tag icon-large"></i>Community
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/cdo.html">
        <i class="icon-tag icon-large"></i>CDO
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/relationships.html">
        <i class="icon-tag icon-large"></i>Relationships
    </a>
</li>
<li class="tag-3">
    <a href="http://jon.doblados.net/tag/mysql.html">
        <i class="icon-tag icon-large"></i>MySQL
    </a>
</li>
<li class="tag-2">
    <a href="http://jon.doblados.net/tag/gbg.html">
        <i class="icon-tag icon-large"></i>GBG
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/marriage.html">
        <i class="icon-tag icon-large"></i>Marriage
    </a>
</li>
<li class="tag-3">
    <a href="http://jon.doblados.net/tag/gallery.html">
        <i class="icon-tag icon-large"></i>Gallery
    </a>
</li>
<li class="tag-3">
    <a href="http://jon.doblados.net/tag/cebu.html">
        <i class="icon-tag icon-large"></i>Cebu
    </a>
</li>
<li class="tag-2">
    <a href="http://jon.doblados.net/tag/community-work.html">
        <i class="icon-tag icon-large"></i>Community Work
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/oracle.html">
        <i class="icon-tag icon-large"></i>Oracle
    </a>
</li>
<li class="tag-3">
    <a href="http://jon.doblados.net/tag/ibm.html">
        <i class="icon-tag icon-large"></i>IBM
    </a>
</li>
<li class="tag-2">
    <a href="http://jon.doblados.net/tag/hosting.html">
        <i class="icon-tag icon-large"></i>Hosting
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/hp.html">
        <i class="icon-tag icon-large"></i>HP
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/github.html">
        <i class="icon-tag icon-large"></i>GitHub
    </a>
</li>
<li class="tag-3">
    <a href="http://jon.doblados.net/tag/selfie.html">
        <i class="icon-tag icon-large"></i>Selfie
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/domains.html">
        <i class="icon-tag icon-large"></i>Domains
    </a>
</li>
<li class="tag-4">
    <a href="http://jon.doblados.net/tag/risc.html">
        <i class="icon-tag icon-large"></i>RISC
    </a>
</li>
<li class="tag-2">
    <a href="http://jon.doblados.net/tag/ubuntu.html">
        <i class="icon-tag icon-large"></i>Ubuntu
    </a>
</li>
<li class="tag-3">
    <a href="http://jon.doblados.net/tag/todo.html">
        <i class="icon-tag icon-large"></i>TODO
    </a>
</li>


</ul>        </div><!--/.well -->

      </div><!--/row-->

      <hr>

      <footer>
        <address id="about">
                Proudly powered by <a href="http://pelican.notmyidea.org/">Pelican <i class="icon-external-link"></i></a>,
                                which takes great advantage of <a href="http://python.org">Python <i class="icon-external-link"></i></a>.
        </address><!-- /#about -->

        <p>The theme is from <a href="http://twitter.github.com/bootstrap/">Bootstrap from Twitter <i class="icon-external-link"></i></a>,
                   and <a href="http://fortawesome.github.com/Font-Awesome/">Font-Awesome <i class="icon-external-link"></i></a>, thanks!</p>
      </footer>

    </div><!--/.fluid-container-->


<script type="text/javascript">
    var disqus_shortname = 'jondoblados';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

    <!-- Le javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://jon.doblados.net/theme/js/jquery-1.7.2.min.js"></script>
    <script src="http://jon.doblados.net/theme/js/bootstrap.min.js"></script>
  </body>
</html>