<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en-us">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>How to count instances of an IP address in a log file | Amalgamated Thoughts </title>

<meta property='og:title' content='How to count instances of an IP address in a log file - Amalgamated Thoughts '>
<meta property='og:description' content='I was looking for a quick and painless way to determine what IP addresses used our web app the most and stumbled across this excellent post.&nbsp;I got reminded of the power of the command-line interface and that often, I underestimate the way these commands are supposed to make a sysad&#39;s life easier.
So here&#39;s a quick tip for counting unique visitors to your web app. Locate your web app&#39;s log file and do a quick scan of the last few lines.'>
<meta property='og:url' content='https://jondoblados.github.io/posts/how-to-count-instances-of-an-ip-address-in-a-log-file/'>
<meta property='og:site_name' content='Amalgamated Thoughts '>
<meta property='og:type' content='article'><meta property='og:image' content='https://www.gravatar.com/avatar/46ccde2b8eedf0f23a9d64dfb6566d9d?s=256'><meta property='article:author' content='https://facebook.com/JonDoblados'><meta property='article:section' content='Posts'><meta property='article:tag' content='Hosting'><meta property='article:tag' content='GNU/Linux'><meta property='article:tag' content='Systems Administration'><meta property='article:published_time' content='2010-07-24T20:00:00Z'/><meta property='article:modified_time' content='2010-07-24T20:00:00Z'/><meta name='twitter:card' content='summary'><meta name='twitter:site' content='@JonDoblados'><meta name='twitter:creator' content='@JonDoblados'>

<link href="https://jondoblados.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Amalgamated Thoughts " />

<link rel="stylesheet" href="/css/style.css"/><link rel='stylesheet' href='https://jondoblados.github.io/css/custom.css'><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" href="https://jondoblados.github.io">
          <h1 class="title is-4">Amalgamated Thoughts </h1>
        </a>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile"><a class="level-item" aria-label="github" href='https://github.com/jondoblados'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="facebook" href='https://facebook.com/JonDoblados'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="twitter" href='https://twitter.com/JonDoblados'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="email" href='mailto:jon@doblados.net'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="linkedin" href='https://linkedin.com/in/JonDoblados'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
    
  </svg></i>
            </span>
          </a></nav>
      </div>
    </nav>

    <nav class="nav">
      

      
    </nav>

  </div>
</section>
<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="/tags/hosting">#Hosting</a>



  
  | <a class="subtitle is-6" href="/tags/gnu/linux">#GNU/Linux</a>
  
  | <a class="subtitle is-6" href="/tags/systems-administration">#Systems Administration</a>
  

      
    </div>
    <h2 class="subtitle is-6">July 24, 2010</h2>
    <h1 class="title">How to count instances of an IP address in a log file</h1>
    
    <div class="content">
      <p>I was looking for a quick and painless way to determine what IP addresses used our web app the most and stumbled across this excellent <a href="http://encodable.com/tech/blog/2008/12/17/Count_IP_Addresses_in_Access_Log_File_BASH_OneLiner">post</a>.&nbsp;I got reminded of the power of the command-line interface and that often, I underestimate the way these commands are supposed to make a sysad's life easier.</p><br/><p>So here's a quick tip for counting unique visitors to your web app. Locate your web app's log file and do a quick scan of the last few lines. In my case, this is what I saw:</p><br/><p><code>112.198.79.223 - - [10/Jul/2010:00:57:29 -0400] "POST /v2/api/execute.php?method=upload_time&amp;ver=win1.1.15 HTTP/1.1" 200 116 "-" "Mozilla/5.0"<br />117.241.112.254 - - [10/Jul/2010:00:57:30 -0400] "POST /v2/api/execute.php?method=timestat&amp;ver=win1.1.15 HTTP/1.1" 200 288 "-" "Mozilla/5.0"<br />80.249.84.105 - - [10/Jul/2010:00:57:29 -0400] "POST /v2/api/execute.php?method=offtime&amp;ver=win1.1.15 HTTP/1.1" 200 19 "-" "Mozilla/5.0"<br />117.241.112.254 - - [10/Jul/2010:00:57:32 -0400] "POST /v2/api/execute.php?method=get_defaults&amp;ver=win1.1.15 HTTP/1.1" 200 77 "-" "Mozilla/5.0"</code></p><br/><p>In this log format, the IP address appears first, so we will only need to get the first set of characters, separated by a space. In order to count instances of an IP address, we sort the IP addresses so similar IP addresses are grouped together, then count them. Then we sort them again so that the sums are arranged. The number of unique IPs may give you pages of standard output, so optionally, if you only want to see which IP addresses accessed the web app the most, we look at the top results only.</p><br/><p>So these are the commands used, piped one after the other, with the output:</p><br/><p><code>[root@server2 ~]# cat /var/log/httpd/access_ssl.log | awk '{print $1}' | sort | uniq -c | sort -nr | head&gt;</code></p><br/><p><code>71612 216.157.78.237<br /> 34094 120.28.205.244<br /> 30091 119.93.97.54<br /> 25078 120.28.214.104<br /> 18949 120.28.195.151<br /> 17929 58.107.64.40<br /> 14877 212.98.174.235<br /> 14752 117.241.112.143<br /> 14429 120.28.247.74<br /> 12864 117.241.113.183<br /> [root@server2 ~]#</code></p><br/><p>Happy counting, err reporting!</p>

      
      <div class="related">

<h3>Similar articles:</h3>
<ul>
	
	<li><a href="/posts/using-non-standard-ssh-port-with-tortoisesvn/">Using non-standard SSH port with TortoiseSVN</a></li>
	
	<li><a href="/posts/piix3-cannot-attach-drive-to-the-secondary-master/">PIIX3 cannot attach drive to the Secondary Master</a></li>
	
	<li><a href="/posts/putty-on-my-phone-ftw-isp-was-acting-up-and-was-able-to-get-apache-towork-sometime-past-3pm.-post-mortem-shortly./">Putty on my phone FTW! ISP was acting up and was able to get Apache to work sometime past 3pm. Post-mortem shortly.</a></li>
	
	<li><a href="/posts/being-a-systems-administrator-37signals-podcast/">Being a Systems Administrator @37signals (Podcast)</a></li>
	
	<li><a href="/posts/how-big-is-a-yottabyte-holy-kaw/">How big is a Yottabyte? - Holy Kaw!</a></li>
	
</ul>
</div>
      
    </div>
    
  </div>
</section>

<section class="section">
  <div class="container">
    <aside><div id="disqus_thread"></div></aside>
  
    <script type="text/javascript">
      var disqus_shortname = 'amalgamated-thoughts';
      function disqus() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }
  
      disqus();
  

    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</section>


<section class="section">
  <div class="container has-text-centered">
    <p>&copy; <a href="https://jondoblados.github.io/">Jon Doblados</a> 2018</p>
    
      <p>Powered by <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/ribice/kiss">Kiss</a>.</p>
    
  </div>
</section>



</body>
</html>

